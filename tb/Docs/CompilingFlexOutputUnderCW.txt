To compile a .c file generated by flex 2.5 under MacOS you must
add libyywrap.c to your project. Add the function prototype for yywrap from that file to your prefix
header so that the flex generated c file knows it exists. It will then build OK.

Also adding the prototype for the routine fileno is neccessary, your prefix should look something like

#include			<stdio.h>

#ifdef __cplusplus
	extern "C" {
#endif

int fileno(struct FILE *stream);

int yywrap();

#ifdef __cplusplus
}
#endif